<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Office D&D Tavern</title>

<style>
:root{
  --panel: rgba(35, 20, 12, .75);
  --panel2: rgba(25, 15, 10, .6);
  --accent: #ffcf6a;
  --text: #f4ead7;
}

*{
  box-sizing: border-box;
}

body{
  margin:0;
  font-family: monospace;
  color: var(--text);
  min-height:100vh;
}

/* Tavern Background */
.bg{
  position:fixed;
  inset:0;
  z-index:-1;
  background:url('bg.png') center/cover no-repeat;
  image-rendering: pixelated;
}

/* Layout */
header{
  padding:30px 20px 10px;
  text-align:center;
}

h1{
  margin:0;
  font-size:32px;
  letter-spacing:1px;
  text-shadow:0 6px 20px rgba(0,0,0,.7);
}

.subtitle{
  margin-top:6px;
  opacity:.9;
  font-size:14px;
}

main{
  max-width:900px;
  margin:20px auto 40px;
  padding:0 20px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:20px;
}

@media(max-width:800px){
  main{
    grid-template-columns:1fr;
  }
}

.card{
  background:var(--panel);
  padding:20px;
  border-radius:12px;
  backdrop-filter: blur(2px);
  box-shadow:0 10px 30px rgba(0,0,0,.4);
}

h2{
  margin-top:0;
  font-size:18px;
}

/* Dice Buttons */
.dice-grid{
  display:grid;
  grid-template-columns: repeat(4,1fr);
  gap:10px;
  margin-top:10px;
}

button{
  padding:12px;
  background:var(--panel2);
  border:1px solid rgba(255,255,255,.2);
  color:var(--text);
  border-radius:8px;
  cursor:pointer;
  font-weight:bold;
  transition:.1s;
}

button:hover{
  border-color:var(--accent);
}

button:active{
  transform:translateY(2px);
}

input, select{
  padding:8px;
  background:var(--panel2);
  border:1px solid rgba(255,255,255,.2);
  color:var(--text);
  border-radius:6px;
  width:80px;
}

.controls{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
}

.result{
  margin-top:15px;
  font-size:26px;
  color:var(--accent);
  font-weight:bold;
}

.history{
  margin-top:15px;
  font-size:13px;
  max-height:300px;
  overflow:auto;
}

.history div{
  margin-bottom:6px;
  padding:6px;
  background:var(--panel2);
  border-radius:6px;
}
</style>
</head>

<body>

<div class="bg"></div>

<header>
  <h1>The Office Tavern</h1>
  <div class="subtitle">Roll true. Blame the dice. Respect initiative.</div>
</header>

<main>

  <div class="card">
    <h2>Dice Roller</h2>

    <div class="controls">
      <label>#</label>
      <input id="count" type="number" value="1" min="1" max="20">
      
      <label>Mod</label>
      <input id="mod" type="number" value="0">

      <select id="mode">
        <option value="normal">Normal</option>
        <option value="adv">Adv</option>
        <option value="dis">Dis</option>
      </select>
    </div>

    <div class="dice-grid">
      <button onclick="roll(4)">d4</button>
      <button onclick="roll(6)">d6</button>
      <button onclick="roll(8)">d8</button>
      <button onclick="roll(10)">d10</button>
      <button onclick="roll(12)">d12</button>
      <button onclick="roll(20)">d20</button>
      <button onclick="roll(100)">d100</button>
    </div>

    <div class="result" id="result"></div>
  </div>

  <div class="card">
    <h2>Roll History</h2>
    <div class="history" id="history"></div>
  </div>

</main>

<script>
function roll(sides){
  let count = parseInt(document.getElementById("count").value) || 1;
  let mod = parseInt(document.getElementById("mod").value) || 0;
  let mode = document.getElementById("mode").value;

  let rolls = [];

  if(sides === 20 && mode !== "normal"){
    let r1 = rand(20);
    let r2 = rand(20);
    let kept = mode === "adv" ? Math.max(r1,r2) : Math.min(r1,r2);
    let total = kept + mod;

    showResult(total, `(${r1}, ${r2}) kept ${kept} ${mod>=0?"+":""}${mod}`);
    addHistory(`d20 ${mode}: (${r1}, ${r2}) â†’ ${total}`);
    return;
  }

  for(let i=0;i<count;i++){
    rolls.push(rand(sides));
  }

  let sum = rolls.reduce((a,b)=>a+b,0);
  let total = sum + mod;

  showResult(total, `[${rolls.join(", ")}] ${mod>=0?"+":""}${mod}`);
  addHistory(`${count}d${sides}: ${total}`);
}

function rand(max){
  return Math.floor(Math.random()*max)+1;
}

function showResult(total, details){
  document.getElementById("result").innerText = total + "  " + details;
}

function addHistory(text){
  let div = document.createElement("div");
  div.innerText = text;
  document.getElementById("history").prepend(div);
}
</script>

</body>
</html>

